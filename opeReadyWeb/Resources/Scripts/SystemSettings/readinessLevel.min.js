var rowCount; var lastsel; var readiness = {}; readiness.Init = function () { }; readiness.CreateReadinessLevelGrid = function (a) { var b; if ($.cookie("lang")) { if ($.cookie("lang") == "he-IL" || $.cookie("lang") == "ar") b = "rtl"; else b = "ltr" } $("#divReadinessLevel").block({ css: { border: "0px" }, overlayCSS: { backgroundColor: "#ffffff", opacity: .7 }, message: "" }); $("#tblReadinessLevel").jqGrid({ direction: b, datatype: function (a) { readiness.getReadinessLevelData() }, height: 160, colNames: [$("#hidReadinessLevels_Grid_ReadinessLevel_ORGName").text(), $("#hidReadinessLevels_Grid_MultiplierFactor").text(), $("#hidReadinessLevels_Grid_ThresholdScore").text(), "", "ReadinessLevelID"], colModel: [{ name: "ORGName", index: "ORGName", sortable: true, sorttype: "text", width: 250 }, { name: "MultiplierFactor", index: "MultiplierFactor", align: "center", sortable: true, width: 130 }, { name: "ThresholdScore", index: "ThresholdScore", sortable: true, align: "center", width: 130 }, { name: "EditType", index: "EditType", sortable: false, edittype: "image", formatter: editFormatter, width: 35, align: "center" }, { name: "ReadinessLevelID", hidden: "true"}], viewrecords: true, sortorder: "asc", autoencode: false, loadonce: false, pginput: true, altRows: true, hoverrows: false, recordpos: b == "rtl" ? "left" : "right", pager: "#pgrReadinessLevel", pgbuttons: false, pginput: false, gridComplete: function () { $(this).setGridParam({ datatype: "local", selarrrow: "false" }); if (rowCount == $(this).getGridParam("records")) { $("#waitplease").css({ display: "none" }); $("#divReadinessLevel").unblock(); rowCount = 0 } }, onCellSelect: function (a, b, c, d) { if (b === 4) { readiness.DefineReadinessLevel_Open($(this).getRowData(a)) } }, ondblClickRow: function (a, b, c, d) { readiness.DefineReadinessLevel_Open($(this).getRowData(a)) } }) }; readiness.getReadinessLevelData = function () { PQ.Admin.WebService.SystemSettingsService.ReadinessLevel_SelectAll(function (a, b) { readiness.ReceivedEventTypeSettingData(JSON.parse(getMain(a)).rows) }, function (a, b) { return false }) }; readiness.ReceivedEventTypeSettingData = function (a) { var b = $("#tblReadinessLevel"); b.clearGridData(); rowCount = a.length; if (!rowCount) $("#divReadinessLevel").unblock(); for (var c = 0; c < a.length; c++) b.addRowData(c + 1, a[c]) }; readiness.SaveReadinessLevelData = function (a) { PQ.Admin.WebService.SystemSettingsService.ReadinessLevel_Save(a, function (a) { $("#tblReadinessLevel").GridUnload(); readiness.CreateReadinessLevelGrid(); $("#divReadinessLevelDetails").dialog("destroy") }, function (a) { return false }) }; readiness.DefineReadinessLevel_Open = function (a) { $("#txtORGName").val(a.ORGName); $("#txtThresholdScore").val(a.ThresholdScore); $("#txtMultiplierFactor").val(a.MultiplierFactor); $("#hidReadinessLevel_ID").val(a.ReadinessLevelID); divReadinessLevelDetails_Open() }; readiness.UpdateMultiJobReadiness = function (a) { PQ.Admin.WebService.SystemSettingsService.UpdateMultiJobReadiness(a, function (a) { setTimeout(function () { $("#waitplease").css({ display: "none" }) }, 250) }, function (a) { return false }) }; readiness.GetchkMultiJobReadiness = function () { PQ.Admin.WebService.SystemSettingsService.DateFormat_SelectCurrent(function (a) { $("#chkMultiJobReadiness").attr("checked", a.MultiJobReadiness) }, function (a) { return false }) }