jQuery.fn.extend({ nextUntil: function (a) { var b = []; this.each(function () { for (var c = this.nextSibling; c; c = c.nextSibling) { if (c.nodeType != 1) continue; if (jQuery.filter(a, [c]).r.length) break; b.push(c) } }); return this.pushStack(b) }, Accordion: function (a) { function f(b, c) { e({ target: jQuery(a.header, this)[c] }) } function e(e) { var f = jQuery(e.target); if (f.parents(a.header).length) { while (!f.is(a.header)) { f = f.parent() } } var g = f[0] == c[0]; if (d || a.alwaysOpen && g || !f.is(a.header)) return; c.toggleClass(a.selectedClass); if (!g) { f.addClass(a.selectedClass) } var h = f.nextUntil(a.header), i = c.nextUntil(a.header), j = [f, c, h, i]; c = g ? jQuery([]) : f; d = i.size() + h.size(); var k = function (a) { d = a ? 0 : --d; if (d) return; b.trigger("change", j) }; if (a.animated) { if (!a.alwaysOpen && g) { h.slideToggle(a.showSpeed); k(true) } else { i.filter(":hidden").each(k).end().filter(":visible").slideUp(a.hideSpeed, k); h.slideDown(a.showSpeed, k) } } else { if (!a.alwaysOpen && g) { h.toggle() } else { i.hide(); h.show() } k(true) } return false } a = jQuery.extend({}, jQuery.Accordion.defaults, { header: jQuery(":first-child", this)[0].tagName }, a); var b = this, c = a.active ? jQuery(a.active, this) : a.active === false ? jQuery("<div>") : jQuery(a.header, this).eq(0), d = 0; b.find(a.header).not(c || "").nextUntil(a.header).hide(); c.addClass(a.selectedClass); return b.bind(a.event, e).bind("activate", f) }, activate: function (a) { return this.trigger("activate", [a || 0]) } }); jQuery.Accordion = {}; jQuery.extend(jQuery.Accordion, { defaults: { selectedClass: "selected", showSpeed: "slow", hideSpeed: "fast", alwaysOpen: true, animated: true, event: "click" }, setDefaults: function (a) { jQuery.extend(jQuery.Accordion.defaults, a) } })