var perfomance = {}; perfomance.Init = function () { }; perfomance.CreateUnitTree = function (e) { if (e) { PQ.Admin.WebService.PQWebService.GetUserMenu(e, function (e) { var t, n; if ($.cookie("lang")) { var r = $.cookie("lang"); if (r == "he-IL" || r == "ar") { t = "default-rtl"; n = true } else { t = "default"; n = false } } try { var i = $("#lblTreeLebel").text() == "" ? 0 : parseInt($("#lblTreeLebel").text()); var s = GetArrayTreeIDs(e, i); $("#treeUnits").jstree({ xml_data: { data: e }, plugins: ["themes", "xml_data", "ui", "types"], core: { rtl: n, initially_open: [s], animation: "100" }, themes: { theme: t }, types: { types: { file: { valid_children: ["default"], icon: { image: "/opeReady/Resources/images/active.png"} }, folder: { valid_children: "all", icon: { image: "/opeReady/Resources/images/close.png" }, select_node: function () { return false } }}} }).bind("select_node.jstree", function (e, t) { $("#waitplease").css({ display: "block" }); $("#hidUnitID").val(t.rslt.obj.get(0).id); $("#ddlUnit").val($(t.rslt.obj.find("a").get(0)).text()); $("#treeUnits").fadeOut("slow"); $("#ddlJobsList").val("0"); if ($("#ddlTrainingEventTypePerfomance").val() == "0") perfomance.DisplayAllEventTypeGraphInfo(t.rslt.obj.get(0).id, $("#hidStartDate").val(), $("#hidEndDate").val()); else perfomance.DisplayUnitReadinessInfo(t.rslt.obj.get(0).id, t.args[0].innerText, $("#hidStartDate").val(), $("#hidEndDate").val()); perfomance.PopulateJobsListCombo(t.rslt.obj.get(0).id); return false }) } catch (o) { } $("#tblGaugesArea").css({ opacity: "1" }) }, function (e) { return false }) } }; perfomance.CreateJobTree = function (e, t) { if (t) { PQ.Admin.WebService.PQWebService.GetUnitJobTree(parseInt(t), function (e) { var t = false; if ($(XmlParser(e)).find("item").length > 0) t = true; if (t) { var n, r; if ($.cookie("lang")) { var i = $.cookie("lang"); if (i == "he-IL" || i == "ar") { n = "default-rtl"; r = true } else { n = "default"; r = false } } try { $("#divJobs").bind("loaded.jstree", function (e, t) { $(this).jstree("open_all"); $("#divWrapperJob").fadeIn("slow"); $("#rightChartsPanel").fadeIn("slow") }).jstree({ xml_data: { data: e }, plugins: ["themes", "xml_data", "ui", "types"], core: { rtl: r, initially_open: ["2"], animation: "100" }, themes: { theme: n} }).bind("select_node.jstree", function (e, t) { $("#waitplease").css({ display: "block" }); perfomance.DisplayJobReadinessInfo(t.rslt.obj.get(0).id, t.args[0].innerText); return false }).jstree("refresh") } catch (s) { } } else { $("#divWrapperJob").fadeOut("slow"); $("#divLowerChart").fadeOut("slow") } }, function (e) { return false }) } }; perfomance.PopulateTrainingEventTypeCombo = function () { $("#ddlTrainingEventTypePerfomance>option").remove(); PQ.Admin.WebService.EventRecords.TrainingEventType_SelectAll($("#hidGrtTrainingEventType").text(), function (e) { $(e).each(function () { $("#ddlTrainingEventTypePerfomance").append($("<option></option>").val(this["TrainingEventType_ID"]).html(this["TrainingEventType_Name"])) }); $("#waitplease").css({ display: "none" }) }, function (e) { return false }) }; perfomance.DisplayAllEventTypeGraphInfo = function (e, t, n) { var r = new Date; r = encodeURI(r.toString()); $("#rightChartsPanel").fadeIn("slow"); $(".charts").block({ css: { border: "0px" }, overlayCSS: { backgroundColor: "#ffffff", opacity: .7 }, message: "" }); $("#divLowerChart").empty(); PQ.Admin.WebService.EventRecords.TrainingEventType_SelectAll($("#hidGrtTrainingEventType").text(), function (i) { $(i).each(function (s) { if (i[s].TrainingEventType_ID != 0) { var o = new Image; $(o).attr("id", i[s]); $(o).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/UnitChartReadinessAnalisys.ashx?uid=" + e + "&tetid=" + i[s].TrainingEventType_ID + "&from=" + t + "&to=" + n + "&d=" + r); $("#divLowerChart").fadeIn("slow").append(o).removeClass("loading") } }); $(".charts").unblock(); $("#waitplease").css({ display: "none" }) }, function (e) { return false }); return false }; perfomance.DisplayUnitReadinessInfo = function (e, t, n, r) { if (t) $("#lblHeaderFieldset").text(t); $("#rightChartsPanel").fadeIn("slow"); $(".charts").block({ css: { border: "0px" }, overlayCSS: { backgroundColor: "#ffffff", opacity: .7 }, message: "" }); perfomance.ChartPerfomanceAnalysis(e, $("#ddlTrainingEventTypePerfomance").val(), $("#ddlTrainingEventCategory").val(), n, r); perfomance.ChartSubEvaluationsFormatter(e, $("#ddlTrainingEventTypePerfomance").val(), $("#ddlTrainingEventCategory").val(), $("#ddlSubEvaluationType").val(), n, r); $("#ddlTrainingEventTypePerfomance").removeClass("ui-state-error", 500); return false }; perfomance.ChartPerfomanceAnalysis = function (e, t, n, r, i) { var s = new Date; s = encodeURI(s.toString()); n = n == null ? 0 : n; $("#divLowerChart").empty(); var o = new Image; $(o).attr("id", t); $(o).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/UnitChartReadinessAnalisys.ashx?uid=" + e + "&tetid=" + t + "&tecatid=" + n + "&from=" + r + "&to=" + i + "&d=" + s); $("#divLowerChart").fadeIn("slow").append(o).removeClass("loading"); return false }; perfomance.ChartSubEvaluationsFormatter = function (e, t, n, r, i, s) { var o = new Date; o = encodeURI(o.toString()); var u = n == undefined ? 0 : parseInt(n); $("#divChrtSubEvaluations").empty(); if (u === 0) { PQ.Admin.WebService.ReadinessWebService.PerfomanceAnalysisSubEvaluations_SelectPerUnits(e, t, function (n) { $(n).each(function (u) { var a = new Image; $(a).attr("id", n[u]); $(a).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/ReadinessAnalisys_UnitSubEvaluation.ashx?uid=" + e + "&tetid=" + t + "&tecatid=" + n[u] + "&from=" + i + "&to=" + s + "&seid=" + r + "&d=" + o); $("#divChrtSubEvaluations").fadeIn("slow").append(a) }); $(".charts").unblock(); $("#waitplease").css({ display: "none" }) }, function (e) { }, null) } else { var a = new Image; $(a).attr("id", u); $(a).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/ReadinessAnalisys_UnitSubEvaluation.ashx?uid=" + e + "&tetid=" + t + "&tecatid=" + u + "&from=" + i + "&to=" + s + "&seid=" + r + "&d=" + o); $("#divChrtSubEvaluations").fadeIn("slow").append(a); $(".charts").unblock(); $("#waitplease").css({ display: "none" }) } return false }; perfomance.DisplayJobReadinessInfo = function (e, t, n, r, i) { if (!isNaN(t)) t = parseInt(t); var s = $("#ddlTrainingEventTypePerfomance").val(); if (t > 0) { if (n) $("#lblHeaderFieldset").text(n) } if (t) { $("#hidJobID").val(t); $("#rightChartsPanel").fadeIn("slow"); $(".charts").block({ css: { border: "0px" }, timeout: 500, overlayCSS: { backgroundColor: "#ffffff", opacity: .9 }, message: "" }); perfomance.ChartJobPerfomanceAnalysis(t, s, r, i); perfomance.ChartJobSubEvaluationPerfomanceAnalysis(t, s, $("#ddlTrainingEventCategory").val(), $("#ddlSubEvaluationType").val(), r, i); $("#ddlTrainingEventTypePerfomance").removeClass("ui-state-error", 500) } else { perfomance.ChartPerfomanceAnalysis(e, $("#ddlTrainingEventTypePerfomance").val(), $("#ddlTrainingEventCategory").val(), r, i); perfomance.ChartSubEvaluationsFormatter(e, $("#ddlTrainingEventTypePerfomance").val(), $("#ddlTrainingEventCategory").val(), $("#ddlSubEvaluationType").val(), r, i) } return false }; perfomance.ChartJobPerfomanceAnalysis = function (e, t, n, r) { var i = new Date; i = encodeURI(i.toString()); $("#divLowerChart").empty(); var s = new Image; $(s).attr("id", t); $(s).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/PerfomanseAnalisys_JobCharts.ashx?jid=" + e + "&tetid=" + t + "&from=" + n + "&to=" + r + "&d=" + i); $("#divLowerChart").fadeIn("slow").append(s).removeClass("loading"); return false }; perfomance.ChartJobSubEvaluationPerfomanceAnalysis = function (e, t, n, r, i, s) { var o = new Date; o = encodeURI(o.toString()); var u = n == undefined ? 0 : parseInt(n); $("#divChrtSubEvaluations").empty(); if (u === 0) { PQ.Admin.WebService.ReadinessWebService.PerfomanceAnalysisSubEvaluations_SelectPerJobs(e, t, function (n) { $(n).each(function (u) { var a = new Image; $(a).attr("id", n[u]); $(a).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/ReadinessAnalisys_JobsSubEvaluation.ashx?jid=" + e + "&tetid=" + t + "&tecatid=" + n[u] + "&from=" + i + "&to=" + s + "&seid=" + r + "&d=" + o); $("#divChrtSubEvaluations").fadeIn("slow").append(a) }); $("#waitplease").css({ display: "none" }) }, function (e) { }, null) } else { var a = new Image; $(a).attr("id", u); $(a).attr("src", "/opeReady/Handlers/ReadinessAnalisysHandlers/ReadinessAnalisys_JobsSubEvaluation.ashx?jid=" + e + "&tetid=" + t + "&tecatid=" + u + "&from=" + i + "&to=" + s + "&seid=" + r + "&d=" + o); $("#divChrtSubEvaluations").fadeIn("slow").append(a); $("#waitplease").css({ display: "none" }) } return false }; perfomance.ChartPerfomanceAnalysis_ExecutionTimeFormatter = function (e, t, n, r, i) { var s = new Date; s = encodeURI(s.toString()); $("#divChartExecutionTime").empty(); var o = new Image; $(o).attr("id", e); $(o).attr("src", "/opeReady/Handlers/PerfomanceAnalysis_ExecutionTimeChart.ashx?eid=" + e + "&tetid=" + t + "&tecatid=" + n + "&from=" + r + "&to=" + i + "&d=" + s); $("#divChartExecutionTime").fadeIn("slow").append(o).removeClass("loading"); $(".charts").unblock(); return false }; perfomance.PopulateJobsListCombo = function (e) { $("#ddlJobsList").addClass("ui-autocomplete-loading"); $("#ddlJobsList>option").remove(); e = e == "" ? 0 : parseInt(e); PQ.Admin.WebService.PQWebService.GetJobByUnitID(e, $("#hidReadinessStatus_grtSelectJobs").text(), function (e) { $(e).each(function () { $("#ddlJobsList").append($("<option></option>").val(this["Job_ID"]).html(this["Job_Name"])) }); $("#ddlJobsList").removeClass("ui-autocomplete-loading") }, function (e) { }); $("#waitplease").css({ display: "none" }); return false }; perfomance.PopulateTrainingEventCategorySelect = function () { $("#ddlTrainingEventCategory>option").remove(); $("#ddlTrainingEventCategory").addClass("ui-autocomplete-ddl-loading"); var e = $("#ddlTrainingEventCategory"); var t = $("#ddlTrainingEventTypePerfomance").val(); PQ.Admin.WebService.AlertSettingService.TrainingEventCategory_Select(t, $("#hidGrtTrainingEventCategory").text(), function (t) { $(t).each(function () { e.append($("<option></option>").val(this["TrainingEventCategory_ID"]).html(this["TrainingEventCategory_Name"])) }); e.removeClass("ui-autocomplete-ddl-loading"); $("#ddlSubEvaluationType").trigger("change") }, function (e) { return false }); $("#waitplease").css({ display: "none" }); return false }; perfomance.PopulateSubEvaluationTypeCombo = function () { $("#ddlSubEvaluationType>option").remove(); $("#ddlSubEvaluationType").addClass("ui-autocomplete-ddl-loading"); var e = $("#ddlTrainingEventCategory").val(); PQ.Admin.WebService.AlertSettingService.SubEvaluationType2TrainingEventCategory_Select(e, $("#hidGrtSubjectEvaluation").text(), function (e) { $(e).each(function () { $("#ddlSubEvaluationType").append($("<option></option>").val(this["SubEvaluationType_ID"]).html(this["SubEvaluationType_Name"])) }); $("#ddlSubEvaluationType").removeClass("ui-autocomplete-ddl-loading") }, function (e) { return false }); $("#waitplease").css({ display: "none" }); return false }; perfomance.PopulateSubEvaluationTypePACombo = function () { $("#ddlSubEvaluationTypePA>option").remove(); $("#ddlSubEvaluationTypePA").addClass("ui-autocomplete-ddl-loading"); var e = $("#ddlTrainingEventCategory").val(); PQ.Admin.WebService.AlertSettingService.SubEvaluationType2TrainingEventCategory_Select(e, $("#hidGrtSubjectEvaluation").text(), function (e) { $(e).each(function () { $("#ddlSubEvaluationTypePA").append($("<option></option>").val(this["SubEvaluationType_ID"]).html(this["SubEvaluationType_Name"])) }); $("#ddlSubEvaluationTypePA").removeClass("ui-autocomplete-ddl-loading") }, function (e) { return false }); $("#waitplease").css({ display: "none" }); return false }